function SmoothScroll(e){function t(e,n,o){setTimeout(function(){"up"==o&&e>=n?(e=e-(e-n)/20-1,window.scrollTo(0,e),t(e,n,o)):"down"==o&&n>=e?(e=e+(n-e)/20+1,window.scrollTo(0,e),t(e,n,o)):scrollTo(0,n)},10)}if(document.getElementById(e.rel.replace(/.*\#/,""))){var n=document.getElementById(e.rel.replace(/.*\#/,"")).getBoundingClientRect(),o=window.getComputedStyle(document.getElementById("container"),"").paddingTop.match(/\d+/),a=n.top+window.pageYOffset-o,l=document.documentElement.scrollHeight,d=window.innerHeight||document.documentElement.clientHeight;if(a>l-d)var a=l-d;var r=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,i=r>a?"up":"down";t(r,a,i),Array.prototype.forEach.call(document.getElementById("panel-inner").querySelectorAll("li"),function(e){e.classList.remove("active")}),e.parentNode.classList.add("active"),toggleNavPanel()}}function toggleNavPanel(){document.getElementById("bottom-editarea").classList.toggle("visible")}function setPrevUrl(){var e=sessionStorage.getItem("prevUrl"),t=new Array;null!==e&&(t=JSON.parse(e)),t.unshift(window.location.href),sessionStorage.setItem("prevUrl",JSON.stringify(t)),location.href=document.getElementById("pager-next").getAttribute("rel")}function getPrevUrl(){var e=sessionStorage.getItem("prevUrl"),t=new Array;t=JSON.parse(e);var n=t.shift();0===t.length?sessionStorage.removeItem("prevUrl"):sessionStorage.setItem("prevUrl",JSON.stringify(t)),location.href=n}!function(){var e=window.navigator.userAgent,t="";document.uniqueID&&!window.matchMedia?t="IE9":/Android/.test(e)&&/Linux; U;/.test(e)&&!/Chrome/.test(e)?t="android":/Macintosh/.test(e)&&/Version/.test(e)?e.match(/^.+Version\/(\d+).+$/)[1]<7&&(t="oldMac"):(/iPhone/.test(e)||/iPad/.test(e))&&/Version/.test(e)&&e.match(/^.+Version\/(\d+).+$/)[1]<8&&(t="oldiOS");var n=document.body.className,o=document.getElementById("panel-inner"),a=document.createDocumentFragment(),l=document.createElement("Div"),d=document.createElement("li"),r=document.createElement("span"),i=document.createElement("a"),c=window.localStorage?!0:!1;switch(i.setAttribute("href","javascript:void(0)"),t){case"IE9":case"oldMac":var s=document.createElement("ul"),p=d.cloneNode(!0),m=i.cloneNode(!0);m.setAttribute("href","http://"+document.domain),m.textContent="HOME",p.appendChild(m),a.appendChild(p);var p=d.cloneNode(!0),m=i.cloneNode(!0);if(m.setAttribute("rel","#container"),m.addEventListener("click",function(){SmoothScroll(this)},!1),m.textContent="PAGE TOP",p.appendChild(m),a.appendChild(p),null!==document.getElementById("box2").querySelector(".hatena-module")){var p=d.cloneNode(!0),m=i.cloneNode(!0);m.setAttribute("rel","#box2"),m.addEventListener("click",function(){SmoothScroll(this)},!1),m.textContent="SIDEBAR",p.appendChild(m),a.appendChild(p)}var p=d.cloneNode(!0);p.textContent="当サイトはChrome,Firefox,Safari最新版,IE11以上推奨です",p.style.whiteSpace="normal",p.style.paddingTop="20px",p.style.paddingBottom="10px",p.style.color="#fff",a.appendChild(p),s.appendChild(a),o.appendChild(s);break;case"android":case"oldiOS":document.getElementById("trigger").style.display="none";break;default:var u=l.cloneNode(!0),h=r.cloneNode(!0),m=i.cloneNode(!0);m.setAttribute("href","http://"+document.domain),h.classList.add("pager-prev"),h.appendChild(m),u.appendChild(h);var h=r.cloneNode(!0),m=i.cloneNode(!0);if(m.setAttribute("rel","#header-container"),m.addEventListener("click",function(){SmoothScroll(this)},!1),h.classList.add("pager-next"),h.appendChild(m),u.classList.add("pager-top"),u.appendChild(h),a.appendChild(u),-1!==n.indexOf("page-index")){var u=l.cloneNode(!0);u.textContent="最新記事",u.classList.add("hatena-module-title"),a.appendChild(u);var s=document.createElement("ul"),g=document.querySelectorAll(".entry");Array.prototype.forEach.call(g,function(e){var t=i.cloneNode(!0),n=d.cloneNode(!0);t.textContent=e.getElementsByTagName("h1")[0].textContent,t.setAttribute("rel","#"+e.id),t.addEventListener("click",function(){SmoothScroll(this)},!1),n.appendChild(t),s.appendChild(n)}),a.appendChild(s);var u=l.cloneNode(!0);if(u.classList.add("pager-page"),c&&sessionStorage.getItem("prevUrl")){var h=r.cloneNode(!0),m=i.cloneNode(!0);m.textContent="前のページ",m.addEventListener("click",getPrevUrl,!1),h.classList.add("pager-prev"),h.appendChild(m),u.appendChild(h)}if(null!==document.querySelector(".autopagerize_insert_before")){var h=document.querySelector(".autopagerize_insert_before .pager-next").cloneNode(!0);if(c){var m=h.getElementsByTagName("a")[0];m.setAttribute("rel",m.getAttribute("href")),m.setAttribute("href","javascript:void(0)"),m.addEventListener("click",setPrevUrl,!1),m.id="pager-next"}u.appendChild(h)}a.appendChild(u)}else if(-1!==n.indexOf("page-entry")){var v=document.querySelector(".hatena-module-related-entries");if(null!==v){a.appendChild(v.getElementsByClassName("hatena-module-title")[0].cloneNode(!0));var s=document.createElement("ul"),g=document.querySelectorAll(".related-entries-title");Array.prototype.forEach.call(g,function(e){var t=d.cloneNode(!0);t.appendChild(e.cloneNode(!0)),s.appendChild(t)}),a.appendChild(s)}}else if(-1!==n.indexOf("page-archive-category")){var f=document.querySelector(".hatena-module-category");if(null!==f){a.appendChild(f.getElementsByClassName("hatena-module-title")[0].cloneNode(!0));var s=f.getElementsByTagName("ul")[0].cloneNode(!0);s.classList.remove("hatena-urllist");for(var p=s.children,y=location.href.match(/^.*\/(.*)$/),C=decodeURI(y[1]),N=0;N<p.length;N++)-1!==p[N].textContent.indexOf(C)&&p[N].classList.add("active");a.appendChild(s)}}else if(-1!==n.indexOf("page-archive")||-1!==n.indexOf("page-entries-year-month-day")){var u=l.cloneNode(!0),m=i.cloneNode(!0);m.setAttribute("href","http://"+document.domain+"/archive"),m.textContent="月間アーカイブ",u.classList.add("hatena-module-title"),u.appendChild(m),a.appendChild(u);var u=l.cloneNode(!0),E=l.cloneNode(!0);E.classList.add("hatena-module-body"),u.classList.add("hatena-module-archive"),u.setAttribute("data-archive-type","calendar"),u.appendChild(E),a.appendChild(u)}else if(-1!==n.indexOf("page-about")){var S=document.querySelector(".hatena-module-links");if(null!==S){a.appendChild(S.getElementsByClassName("hatena-module-title")[0].cloneNode(!0));var s=S.getElementsByTagName("ul")[0].cloneNode(!0);s.classList.remove("hatena-urllist"),a.appendChild(s)}}if(null!==document.getElementById("box2").querySelector(".hatena-module")){var u=l.cloneNode(!0),h=r.cloneNode(!0),m=i.cloneNode(!0);m.setAttribute("rel","#box2"),m.addEventListener("click",function(){SmoothScroll(this)},!1),h.classList.add("pager-next"),h.appendChild(m),u.classList.add("pager-box2"),u.appendChild(h),a.appendChild(u)}o.appendChild(a),document.getElementById("trigger").addEventListener("click",toggleNavPanel,!1)}}();